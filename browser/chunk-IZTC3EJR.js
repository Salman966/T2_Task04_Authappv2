import{d as E,e as I,f as w,h as N,i as V}from"./chunk-APH76CJ5.js";import{D as g,F as l,G as v,H as r,I as a,J as M,K as h,L as c,M as p,N as s,O as m,P as O,U as D,V as y,W as T,Y as k,_ as S,aa as F,n as u,p as b,q as f,u as x,v as C,w as i,z as P}from"./chunk-7WEHDCMB.js";function G(n,t){n&1&&(r(0,"div",10),s(1," Loading... "),a())}function R(n,t){if(n&1){let e=h();r(0,"div",14)(1,"div",15)(2,"h3"),s(3),a(),r(4,"button",16),c("click",function(){let d=b(e).$implicit,_=p(3);return f(_.deletePost(d.id))}),s(5,"Delete"),a()(),r(6,"p"),s(7),a()()}if(n&2){let e=t.$implicit;i(3),m(e.title),i(4),m(e.body)}}function $(n,t){if(n&1&&(r(0,"div"),g(1,R,8,2,"div",13),a()),n&2){let e=p(2);i(),l("ngForOf",e.allPosts)}}function j(n,t){if(n&1){let e=h();r(0,"div",14)(1,"div",15)(2,"h3"),s(3),a(),r(4,"button",16),c("click",function(){let d=b(e).$implicit,_=p(3);return f(_.deletePost(d.id))}),s(5,"Delete"),a()(),r(6,"p"),s(7),a()()}if(n&2){let e=t.$implicit;i(3),m(e.title),i(4),m(e.body)}}function z(n,t){if(n&1&&(r(0,"div"),g(1,j,8,2,"div",13),a()),n&2){let e=p(2);i(),l("ngForOf",e.userPosts)}}function A(n,t){if(n&1&&(r(0,"div",11),g(1,$,2,1,"div",12)(2,z,2,1,"div",12),a()),n&2){let e=p();i(),l("ngIf",e.selectedTab==="all"),i(),l("ngIf",e.selectedTab==="mine")}}var U=class n{route=u(S);router=u(F);http=u(k);fb=u(N);user=null;allPosts=[];userPosts=[];loading=x(!1);tabForm=this.fb.group({selectedTab:["all"]});get selectedTab(){return this.tabForm.get("selectedTab")?.value}constructor(){let t=this.route.snapshot.data.user;if(console.log("Resolved data from resolver:",t),!t||!t.user){this.router.navigate(["/"],{replaceUrl:!0});return}this.user=t.user,this.allPosts=t.allPosts,this.userPosts=t.userPosts,this.tabForm.get("selectedTab")?.valueChanges.subscribe(()=>{this.loading.set(!0),setTimeout(()=>this.loading.set(!1),500)})}logout(){localStorage.removeItem("authUser"),this.router.navigateByUrl("/",{replaceUrl:!0})}deletePost(t){this.loading.set(!0),this.http.delete(`https://dummyjson.com/posts/${t}`).subscribe(()=>{this.allPosts=this.allPosts.filter(e=>e.id!==t),this.userPosts=this.userPosts.filter(e=>e.id!==t),this.loading.set(!1)},()=>this.loading.set(!1))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-dashboard"]],decls:18,vars:11,consts:[[1,"dashboard"],[1,"header"],[1,"user-info"],["alt","User Image",1,"user-image",3,"src"],[1,"user-details"],[1,"logout-button",3,"click"],[1,"tabs",3,"formGroup"],["type","button",3,"click"],["class","loading-spinner",4,"ngIf"],["class","posts",4,"ngIf"],[1,"loading-spinner"],[1,"posts"],[4,"ngIf"],["class","post",4,"ngFor","ngForOf"],[1,"post"],[1,"post-header"],[3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),M(3,"img",3),r(4,"div",4)(5,"h2"),s(6),a(),r(7,"p"),s(8),a()()(),r(9,"button",5),c("click",function(){return o.logout()}),s(10,"Logout"),a()(),r(11,"form",6)(12,"button",7),c("click",function(){return o.tabForm.patchValue({selectedTab:"all"})}),s(13," All Posts "),a(),r(14,"button",7),c("click",function(){return o.tabForm.patchValue({selectedTab:"mine"})}),s(15," My Posts "),a()(),g(16,G,2,0,"div",8)(17,A,3,2,"div",9),a()),e&2&&(i(3),l("src",o.user==null?null:o.user.image,C),i(3),O("",o.user==null?null:o.user.firstName," ",o.user==null?null:o.user.lastName,""),i(2),m(o.user==null?null:o.user.email),i(3),l("formGroup",o.tabForm),i(),v("active",o.selectedTab==="all"),i(2),v("active",o.selectedTab==="mine"),i(2),l("ngIf",o.loading()),i(),l("ngIf",!o.loading()))},dependencies:[T,D,y,V,I,E,w],styles:[".dashboard[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center}.user-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;margin-right:15px}.user-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px}.user-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666}.logout-button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none;padding:10px 20px;border-radius:5px;cursor:pointer}.tabs[_ngcontent-%COMP%]{display:flex;margin-bottom:20px}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:10px;border:none;background-color:#eee;cursor:pointer;border-radius:5px 5px 0 0}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ccc;font-weight:700}.posts[_ngcontent-%COMP%]{border:1px solid #ccc;border-top:none;padding:20px;border-radius:0 0 5px 5px;background-color:#f9f9f9}.post[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;padding:10px 0}.post[_ngcontent-%COMP%]:last-child{border-bottom:none}.post-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.post-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.post-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer}.post-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.loading-spinner[_ngcontent-%COMP%]{text-align:center;font-weight:700;color:#555;padding:20px;font-size:18px}"]})};export{U as DashboardComponent};
